/*
 html2canvas v0.33 <http://html2canvas.hertzen.com>
 Copyright (c) 2011 Niklas von Hertzen. All rights reserved.
 http://www.twitter.com/niklasvh

 Released under MIT License
*/
(function(k,M,n){function C(a){f.logging&&k.console&&k.console.log&&k.console.log(a)}function W(a,b){var e=[];return{storage:e,width:a,height:b,fillRect:function(){e.push({type:"function",name:"fillRect",arguments:arguments})},drawImage:function(){e.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){e.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){e.push({type:"variable",name:a,arguments:b})}}}var f={},H;f.Util={};f.Util.backgroundImage=
function(a){if(/data:image\/.*;base64,/i.test(a)||/^(-webkit|-moz|linear-gradient|-o-)/.test(a))return a;a.toLowerCase().substr(0,5)==='url("'?(a=a.substr(5),a=a.substr(0,a.length-2)):(a=a.substr(4),a=a.substr(0,a.length-1));return a};f.Util.Bounds=function(a){var b={};if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),b.top=a.top,b.bottom=a.bottom||a.top+a.height,b.left=a.left,b.width=a.width||a.right-a.left,b.height=a.height||a.bottom-a.top,b};f.Util.getCSS=function(a,b){return $(a).css(b)};
f.Util.Extend=function(a,b){for(var e in a)a.hasOwnProperty(e)&&(b[e]=a[e]);return b};f.Util.Children=function(a){var b;try{b=$(a).contents()}catch(e){C("html2canvas.Util.Children failed with exception: "+e.message),b=[]}return b};f.Generate={};f.Generate.Gradient=function(a,b){function e(a){for(var c=-1,b="",i;c++<a.length;)if(i=a.charAt(c),i===")"){if(b+=i,k.push(b),b="",c=a.indexOf(",",c)+1,c===0)break}else b+=i}var f=M.createElement("canvas"),h=f.getContext("2d"),c,o=0,E=0,q=0,F=0,k=[],n;f.width=
b.width;f.height=b.height;if((c=a.match(/-webkit-linear-gradient\((.*)\)/))!==null){n=c[1].split(",",1)[0];e(c[1].substr(n.length+2));n=n.split(" ");for(c=0;c<n.length;c+=1)switch(n[c]){case "top":F=b.height;break;case "right":o=b.width;break;case "bottom":E=b.height;break;case "left":q=b.width}}else if((c=a.match(/-webkit-gradient\(linear, (\d+)[%]{0,1} (\d+)[%]{0,1}, (\d+)[%]{0,1} (\d+)[%]{0,1}, from\((.*)\), to\((.*)\)\)/))!==null)o=c[1]*b.width/100,E=c[2]*b.height/100,q=c[3]*b.width/100,F=c[4]*
b.height/100,k.push(c[5]),k.push(c[6]);else if((c=a.match(/-moz-linear-gradient\((\d+)[%]{0,1} (\d+)[%]{0,1}, (.*)\)/))!==null)o=c[1]*b.width/100,E=c[2]*b.width/100,q=b.width-o,F=b.height-E,e(c[3]);else return;q=h.createLinearGradient(o,E,q,F);F=1/(k.length-1);o=0;for(E=k.length;o<E;o+=1)try{q.addColorStop(F*o,k[o])}catch(A){C(["failed to add color stop: ",A,"; tried to add: ",k[o],"; stop: ",o,"; in: ",a])}h.fillStyle=q;h.fillRect(0,0,b.width,b.height);h=new Image;h.src=f.toDataURL();return h};f.Generate.ListAlpha=
function(a){var b="",f;do f=a%26,b=String.fromCharCode(f+64)+b,a/=26;while(a*26>26);return b};f.Generate.ListRoman=function(a){var b=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],f=[1E3,900,500,400,100,90,50,40,10,9,5,4,1],k="",h,c=b.length;if(a<=0||a>=4E3)return a;for(h=0;h<c;h+=1)for(;a>=f[h];)a-=f[h],k+=b[h];return k};f.Parse=function(a,b){function e(g,a){var c=parseInt(t(g,a),10);return isNaN(c)?0:c}function N(g,a,c,b,d,i){i!=="transparent"&&(g.setVariable("fillStyle",i),g.fillRect(a,
c,b,d),s+=1)}function h(g,a){switch(a){case "lowercase":return g.toLowerCase();case "capitalize":return g.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(g,a,c){if(g.length>0)return a+c.toUpperCase()});case "uppercase":return g.toUpperCase();default:return g}}function c(g){return g.replace(/^\s*/g,"").replace(/\s*$/g,"")}function o(g,a,d){var d=d.ctx,K=t(g,"fontFamily"),L=t(g,"fontSize"),T=t(g,"color"),v=t(g,"textDecoration"),q=t(g,"textAlign"),m=t(g,"letterSpacing"),e,w,p=t(g,"fontWeight"),u=t(g,"fontStyle"),
l=t(g,"fontVariant"),k=0;a.nodeValue=h(a.nodeValue,t(g,"textTransform"));if(c(a.nodeValue).length>0){if(v!=="none")if(I[K+"-"+L]!==n)w=I[K+"-"+L];else{w=j.createElement("div");var g=j.createElement("img"),r=j.createElement("span"),E;w.style.visibility="hidden";w.style.fontFamily=K;w.style.fontSize=L;w.style.margin=0;w.style.padding=0;B.appendChild(w);g.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";g.width=1;g.height=1;g.style.margin=0;g.style.padding=0;g.style.verticalAlign=
"baseline";r.style.fontFamily=K;r.style.fontSize=L;r.style.margin=0;r.style.padding=0;r.appendChild(j.createTextNode("Hidden Text"));w.appendChild(r);w.appendChild(g);E=g.offsetTop-r.offsetTop+1;w.removeChild(r);w.appendChild(j.createTextNode("Hidden Text"));w.style.lineHeight="normal";g.style.verticalAlign="super";g={baseline:E,lineWidth:1,middle:g.offsetTop-w.offsetTop+1};I[K+"-"+L]=g;B.removeChild(w);w=g}q=q.replace(["-webkit-auto"],["auto"]);q=b.letterRendering===!1&&/^(left|right|justify|auto)$/.test(q)&&
/^(normal|none)$/.test(m)?a.nodeValue.split(/(\b| )/):a.nodeValue.split("");switch(parseInt(p,10)){case 401:p="bold";break;case 400:p="normal"}d.setVariable("fillStyle",T);d.setVariable("font",u+" "+l+" "+p+" "+L+" "+K);d.setVariable("textAlign","left");K=a;for(L=0;L<q.length;L+=1){p=null;if(i.rangeBounds){if(v!=="none"||c(q[L]).length!==0)p=q[L],j.createRange?(e=j.createRange(),e.setStart(a,k),e.setEnd(a,k+p.length)):e=B.createTextRange(),e=e.getBoundingClientRect()?e.getBoundingClientRect():{}}else{if(typeof K.nodeValue!==
"string")continue;u=K.splitText(q[L].length);l=K.parentNode;m=j.createElement("wrapper");g=K.cloneNode(!0);m.appendChild(K.cloneNode(!0));l.replaceChild(m,K);e=f.Util.Bounds(m);p=K.nodeValue;K=u;l.replaceChild(g,m)}if(p!==null)u=e.left,l=e.bottom,m=d,c(p).length>0&&(m.fillText(p,u,l),s+=1);switch(v){case "underline":N(d,e.left,Math.round(e.top+w.baseline+w.lineWidth),e.width,1,T);break;case "overline":N(d,e.left,e.top,e.width,1,T);break;case "line-through":N(d,e.left,Math.ceil(e.top+w.middle+w.lineWidth),
e.width,1,T)}k+=q[L].length}}}function E(g){return(g=a[g])&&g.succeeded===!0?g.img:!1}function q(g,a){var c=Math.max(g.left,a.left),b=Math.max(g.top,a.top);return{left:c,top:b,width:Math.min(g.left+g.width,a.left+a.width)-c,height:Math.min(g.top+g.height,a.top+a.height)-b}}function F(g,a,c,b){for(var d=c.left,i=c.top,f=c.width,c=c.height,h,m,j,s,p,l=function(g){var a=[],c=["Top","Right","Bottom","Left"],b;for(b=0;b<4;b+=1)a.push({width:e(g,"border"+c[b]+"Width"),color:t(g,"border"+c[b]+"Color")});
return a}(g),g=0;g<4;g+=1)if(h=l[g],h.width>0){m=d;j=i;s=f;p=c-l[2].width;switch(g){case 0:p=l[0].width;break;case 1:m=d+f-l[1].width;s=l[1].width;break;case 2:j=j+c-l[2].width;p=l[2].width;break;case 3:s=l[3].width}s={left:m,top:j,width:s,height:p};b&&(s=q(s,b));s.width>0&&s.height>0&&N(a,m,j,s.width,s.height,h.color)}return l}function R(g,a,c){var b=j.createElement("valuewrap"),d=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth",
"borderTopWidth"],e,s,i;e=0;for(s=d.length;e<s;e+=1){i=d[e];try{b.style[i]=t(g,i)}catch(m){C("html2canvas: Parse: Exception caught in renderFormValue: "+m.message)}}b.style.borderColor="black";b.style.borderStyle="solid";b.style.display="block";b.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(g.type)||g.nodeName==="SELECT")b.style.lineHeight=t(g,"height");b.style.top=a.top+"px";b.style.left=a.left+"px";a=j.createTextNode(g.nodeName==="SELECT"?g.options[g.selectedIndex].text:
g.value);b.appendChild(a);B.appendChild(b);o(g,a,c);B.removeChild(b)}function H(g,a,c){var b=function(a){return a!==n?(a.split(",")[0]||"0 0").split(" "):[t(g,"backgroundPositionX"),t(g,"backgroundPositionY")]}(t(g,"backgroundPosition")),d,e;b.length===1&&(d=b,b=[],b[0]=d,b[1]=d);b[0].toString().indexOf("%")!==-1?(e=parseFloat(b[0])/100,d=a.width*e-c.width*e):d=parseInt(b[0],10);b[1].toString().indexOf("%")!==-1?(e=parseFloat(b[1])/100,a=a.height*e-c.height*e):a=parseInt(b[1],10);return{top:a,left:d}}
function A(a,b,c,d,e,i,h,j){var m=0,f=0;h-c>0&&(m=h-c);j-d>0&&(f=j-d);a.drawImage(b,m,f,e-m,i-f,c+m,d+f,e-m,i-f);s+=1}function x(a,b,c,d,e,i,s){var s=Math.min(b.height,s),f,h;c.left-=Math.ceil(c.left/b.width)*b.width;for(h=d+c.left;h<i+d;)f=Math.floor(h+b.width)>i+d?i+d-h:b.width,A(a,b,h,e+c.top,f,s,d,e),h=Math.floor(h+b.width)}function Q(a,d){var i=f.Util.Bounds(a),h=i.left,k=i.top,o=i.width,v=i.height,n,m=t(a,"backgroundColor"),I=t(a,"position"),w,p=t(a,"opacity"),u,y;d?U={}:(U={width:Math.max(Math.max(j.body.scrollWidth,
j.documentElement.scrollWidth),Math.max(j.body.offsetWidth,j.documentElement.offsetWidth),Math.max(j.body.clientWidth,j.documentElement.clientWidth)),height:Math.max(Math.max(j.body.scrollHeight,j.documentElement.scrollHeight),Math.max(j.body.offsetHeight,j.documentElement.offsetHeight),Math.max(j.body.clientHeight,j.documentElement.clientHeight))},d={opacity:1});y=t(a,"zIndex");(w=d.zIndex)?y!=="auto"&&(y={zindex:y,children:[]},w.children.push(y),w=y):w=y={zindex:0,children:[]};u={ctx:W(U.width||
o,U.height||v),zIndex:w,opacity:p*d.opacity,cssPosition:I};if(d.clip)u.clip=f.Util.Extend({},d.clip);if(b.useOverflow===!0&&/(hidden|scroll|auto)/.test(t(a,"overflow"))===!0&&/(BODY)/i.test(a.nodeName)===!1)u.clip=u.clip?q(u.clip,i):i;I=w.children.push(u);y=w.children[I-1].ctx;y.setVariable("globalAlpha",u.opacity);p=F(a,y,i,!1);u.borders=p;l.test(a.nodeName)&&b.iframeDefault!=="transparent"&&(m=b.iframeDefault==="default"?"#efefef":b.iframeDefault);o={left:h+p[3].width,top:k+p[0].width,width:o-(p[1].width+
p[3].width),height:v-(p[0].width+p[2].width)};u.clip&&(o=q(o,u.clip));if(o.height>0&&o.width>0){N(y,o.left,o.top,o.width,o.height,m);var z=o,r=t(a,"backgroundImage"),D=t(a,"backgroundRepeat").split(",")[0],J,G,B;!/data:image\/.*;base64,/i.test(r)&&!/^(-webkit|-moz|linear-gradient|-o-)/.test(r)&&(r=r.split(",")[0]);if(typeof r!=="undefined"&&/^(1|none)$/.test(r)===!1)if(r=f.Util.backgroundImage(r),m=E(r),v=H(a,z,m),m)switch(D){case "repeat-x":x(y,m,v,z.left,z.top,z.width,z.height);break;case "repeat-y":r=
z.left;D=z.top;J=z.height;G=Math.min(m.width,z.width);v.top-=Math.ceil(v.top/m.height)*m.height;for(B=D+v.top;B<J+D;)z=Math.floor(B+m.height)>J+D?J+D-B:m.height,A(y,m,r+v.left,B,G,z,r,D),B=Math.floor(B+m.height);break;case "no-repeat":r=z.width-v.left;B=z.height-v.top;D=v.left;J=v.top;G=v.left+z.left;v=v.top+z.top;D<0?(D=Math.abs(D),G+=D,r=Math.min(z.width,m.width-D)):(r=Math.min(r,m.width),D=0);J<0?(J=Math.abs(J),v+=J,B=Math.min(z.height,m.height-J)):(B=Math.min(B,m.height),J=0);B>0&&r>0&&(y.drawImage(m,
D,J,r,B,G,v,r,B),s+=1);break;default:v.top-=Math.ceil(v.top/m.height)*m.height;for(r=z.top+v.top;r<z.height+z.top;)D=Math.min(m.height,z.height+z.top-r),D=Math.floor(r+m.height)>D+r?D+r-r:m.height,r<z.top?(J=z.top-r,r=z.top):J=0,x(y,m,v,z.left,r,z.width,D),J>0&&(v.top+=J),r=Math.floor(r+m.height)-J}else C("html2canvas: Error loading background:"+r)}switch(a.nodeName){case "IMG":u=a.getAttribute("src");(n=E(u))?(u=e(a,"paddingLeft"),o=e(a,"paddingTop"),m=e(a,"paddingRight"),v=e(a,"paddingBottom"),
y.drawImage(n,0,0,n.width,n.height,h+u+p[3].width,k+o+p[0].width,i.width-(p[1].width+p[3].width+u+m),i.height-(p[0].width+p[2].width+o+v)),s+=1):C("html2canvas: Error loading <img>:"+u);break;case "INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&a.value.length>0&&R(a,i,u);break;case "TEXTAREA":a.value.length>0&&R(a,i,u);break;case "SELECT":a.options.length>0&&R(a,i,u);break;case "LI":i=o;h=t(a,"listStylePosition");p=t(a,"listStyleType");k=t(a,"fontWeight");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(p)){y=
$(a).index()+1;switch(p){case "decimal":n=y;break;case "decimal-leading-zero":n=y.toString().length===1?"0"+y.toString():y.toString();break;case "upper-roman":n=f.Generate.ListRoman(y);break;case "lower-roman":n=f.Generate.ListRoman(y).toLowerCase();break;case "lower-alpha":n=f.Generate.ListAlpha(y).toLowerCase();break;case "upper-alpha":n=f.Generate.ListAlpha(y)}n+=". ";u=n;p=j.createElement("boundelement");p.style.display="inline";y=a.style.listStyleType;a.style.listStyleType="none";p.appendChild(j.createTextNode(u));
a.insertBefore(p,a.firstChild);u=f.Util.Bounds(p);a.removeChild(p);a.style.listStyleType=y;switch(k){case 401:k="bold";break;case 400:k="normal"}S.setVariable("fillStyle",t(a,"color"));S.setVariable("font",t(a,"fontVariant")+" "+k+" "+t(a,"fontStyle")+" "+t(a,"fontSize")+" "+t(a,"fontFamily"));if(h==="inside")S.setVariable("textAlign","left"),i=i.left,h=u.bottom,k=S,c(n).length>0&&(k.fillText(n,i,h),s+=1)}break;case "CANVAS":u=e(a,"paddingLeft"),o=e(a,"paddingTop"),m=e(a,"paddingRight"),v=e(a,"paddingBottom"),
y.drawImage(a,0,0,a.width,a.height,h+u+p[3].width,k+o+p[0].width,i.width-(p[1].width+p[3].width+u+m),i.height-(p[0].width+p[2].width+o+v)),s+=1}return w.children[I-1]}function O(a,b){if(t(a,"display")!=="none"&&t(a,"visibility")!=="hidden"&&(b=Q(a,b)||b,S=b.ctx,!l.test(a.nodeName))){var c=f.Util.Children(a),d,i,e;d=0;for(e=c.length;d<e;d+=1)i=c[d],i.nodeType===1?O(i,b):i.nodeType===3&&o(a,i,b)}}k.scroll(0,0);var i={rangeBounds:!1},d=b.elements===n?M.body:b.elements[0],s=0,I={},j=d.ownerDocument,l=
RegExp("("+b.ignoreElements+")"),B=j.body,G,P,S,U,V,a=a||{};if(j.createRange&&(G=j.createRange(),G.getBoundingClientRect)){P=j.createElement("boundtest");P.style.height="123px";P.style.display="block";B.appendChild(P);G.selectNode(P);G=G.getBoundingClientRect();G=G.height;if(G===123)i.rangeBounds=!0;B.removeChild(P)}var t=f.Util.getCSS;P=Q(d,null);G=0;d=d.children;for(V=d.length;G<V;G+=1)O(d[G],P);P.backgroundColor=t(B,"backgroundColor");return P};f.Preload=function(a){function b(){C("html2canvas: start: images: "+
c.numLoaded+" / "+c.numTotal+" (failed: "+c.numFailed+")");!c.firstRun&&c.numLoaded>=c.numTotal&&(typeof a.complete==="function"&&a.complete(c),C("Finished loading images: # "+c.numTotal+" (failed: "+c.numFailed+")"))}function e(i,d,e){var f,j=a.proxy,l;x.href=i;i=x.href;f="html2canvas_"+F++;e.callbackname=f;j+=j.indexOf("?")>-1?"&":"?";j+="url="+encodeURIComponent(i)+"&callback="+f;l=R.createElement("script");k[f]=function(a){a.substring(0,6)==="error:"?(e.succeeded=!1,c.numLoaded++,c.numFailed++,
b()):(h(d,e),d.src=a);k[f]=n;try{delete k[f]}catch(i){}l.parentNode.removeChild(l);l=null;delete e.script;delete e.callbackname};l.setAttribute("type","text/javascript");l.setAttribute("src",j);e.script=l;k.document.body.appendChild(l)}function N(a){var d=f.Util.Children(a),e,h=d.length,j,l=!1;for(e=0;e<h;e+=1)N(d[e]);try{l=a.nodeType}catch(q){l=!1,C("html2canvas: failed to access some element's nodeType - Exception: "+q.message)}if(l===1||l===n){try{j=f.Util.getCSS(a,"backgroundImage")}catch(o){C("html2canvas: failed to get background-image - Exception: "+
o.message)}j&&j!=="1"&&j!=="none"&&(j.substring(0,7)==="-webkit"||j.substring(0,3)==="-o-"||j.substring(0,4)==="-moz"?(a=f.Generate.Gradient(j,f.Util.Bounds(a)),a!==n&&(c[j]={img:a,succeeded:!0},c.numTotal++,c.numLoaded++,b())):(j=f.Util.backgroundImage(j.match(/data:image\/.*;base64,/i)?j:j.split(",")[0]),E.loadImage(j)))}}function h(i,d){i.onload=function(){d.timer!==n&&k.clearTimeout(d.timer);c.numLoaded++;d.succeeded=!0;b()};i.onerror=function(){if(i.crossOrigin==="anonymous"&&(k.clearTimeout(d.timer),
a.proxy)){var h=i.src;i=new Image;d.img=i;i.src=h;e(i.src,i,d);return}c.numLoaded++;c.numFailed++;d.succeeded=!1;b()}}var c={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},o,E,q,F=0;q=a.elements[0]||M.body;var R=q.ownerDocument,H=R.images,A=H.length,x=R.createElement("a"),Q=function(a){return a.crossOrigin!==n}(new Image),O;x.href=k.location.href;o=x.protocol+x.host;E={loadImage:function(b){var d,f;if(b&&c[b]===n)d=new Image,b.match(/data:image\/.*;base64,/i)?(d.src=b.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,
""),f=c[b]={img:d},c.numTotal++,h(d,f)):(x.href=b,x.href=x.href,x.protocol+x.host===o||a.allowTaint===!0?(f=c[b]={img:d},c.numTotal++,h(d,f),d.src=b):Q&&!a.allowTaint&&a.useCORS?(d.crossOrigin="anonymous",f=c[b]={img:d},c.numTotal++,h(d,f),d.src=b,d.customComplete=function(){if(this.img.complete)this.img.onerror();else this.timer=k.setTimeout(this.img.customComplete,100)}.bind(f),d.customComplete()):a.proxy&&(f=c[b]={img:d},c.numTotal++,e(b,d,f)))},cleanupDOM:function(e){var d,f;if(!c.cleanupDone){e&&
typeof e==="string"?C("html2canvas: Cleanup because: "+e):C("html2canvas: Cleanup after timeout: "+a.timeout+" ms.");for(f in c)if(c.hasOwnProperty(f)&&(d=c[f],typeof d==="object"&&d.callbackname&&d.succeeded===n)){k[d.callbackname]=n;try{delete k[d.callbackname]}catch(h){}d.script&&d.script.parentNode&&(d.script.setAttribute("src","about:blank"),d.script.parentNode.removeChild(d.script));c.numLoaded++;c.numFailed++;C("html2canvas: Cleaned up failed img: '"+f+"' Steps: "+c.numLoaded+" / "+c.numTotal)}k.stop!==
n?k.stop():M.execCommand!==n&&M.execCommand("Stop",!1);M.close!==n&&M.close();c.cleanupDone=!0;e&&typeof e==="string"||b()}},renderingDone:function(){O&&k.clearTimeout(O)}};a.timeout>0&&(O=k.setTimeout(E.cleanupDOM,a.timeout));C("html2canvas: Preload starts: finding background-images");c.firstRun=!0;N(q);C("html2canvas: Preload: Finding images");for(q=0;q<A;q+=1)E.loadImage(H[q].getAttribute("src"));c.firstRun=!1;C("html2canvas: Preload: Done.");c.numTotal===c.numLoaded&&b();return E};f.Renderer=
function(a,b){function e(a){var b=[],f=[],a=a.children,n,q,F,C;n=0;for(F=a.length;n<F;n+=1)q=a[n],q.children&&q.children.length>0?(b.push(q),f.push(q.zindex)):k.push(q);f.sort(function(a,b){return a-b});a=0;for(n=f.length;a<n;a+=1){q=f[a];F=0;for(C=b.length;F<=C;F+=1)if(b[F].zindex===q){q=b.splice(F,1);e(q[0]);break}}}var k=[];e(a.zIndex);if(typeof b.renderer._create!=="function")throw Error("Invalid renderer defined");return b.renderer._create(a,b,M,k,f)};H=function(a,b){var e,N,h={logging:!1,elements:a,
proxy:"http://html2canvas.appspot.com/",timeout:0,useCORS:!1,allowTaint:!1,iframeDefault:"default",ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,flashcanvas:n,width:null,height:null,taintTest:!0},h=f.Util.Extend(b,h);h.renderer=h.renderer||H.Renderer.Canvas(h);f.logging=h.logging;h.complete=function(a){if(!(typeof h.onpreloaded==="function"&&h.onpreloaded(a)===!1)&&(e=f.Parse(a,h),!(typeof h.onparsed==="function"&&h.onparsed(e)===!1)&&(N=f.Renderer(e,h),typeof h.onrendered===
"function")))h.onrendered(N)};k.setTimeout(function(){f.Preload(h)},0);return{render:function(a,b){return f.Renderer(a,f.Util.Extend(b,h))},parse:function(a,b){return f.Parse(a,f.Util.Extend(b,h))},preload:function(a){return f.Preload(f.Util.Extend(a,h))},log:C}};H.log=C;H.Renderer={Canvas:n};H.Renderer.Canvas=function(a){var a=a||{},b=a.canvas||M.createElement("canvas"),e=!1,f=!1,h=!1,c;if(b.getContext)H.log("html2canvas: Renderer: using canvas renderer"),h=!0;else if(a.flashcanvas!==n){e=!0;H.log("html2canvas: Renderer: canvas not available, using flashcanvas");
var o=M.createElement("script");o.src=a.flashcanvas;o.onload=function(a,b){var c;if(a.onload===n)a.onreadystatechange!==n?(c=function(){a.readyState!=="loaded"&&a.readyState!=="complete"?k.setTimeout(c,250):b()},k.setTimeout(c,250)):H.log("html2canvas: Renderer: Can't track when flashcanvas is loaded");else return b}(o,function(){typeof k.FlashCanvas!=="undefined"&&(H.log("html2canvas: Renderer: Flashcanvas initialized"),k.FlashCanvas.initElement(b),h=!0,f!==!1&&c._create.apply(null,f))});M.body.appendChild(o)}return c=
{_create:function(a,c,k,o,H){if(!h)return f=arguments,b;var A=b.getContext("2d"),x,Q,O,i,d,s,I=M.createElement("canvas");d=I.getContext!==n;var j,l,I=d?I.getContext("2d"):{};s=[];b.width=b.style.width=!e?c.width||a.ctx.width:Math.min(2880,c.width||a.ctx.width);b.height=b.style.height=!e?c.height||a.ctx.height:Math.min(2880,c.height||a.ctx.height);x=A.fillStyle;A.fillStyle=a.backgroundColor;A.fillRect(0,0,b.width,b.height);A.fillStyle=x;Q=0;for(O=o.length;Q<O;Q+=1){x=o.splice(0,1)[0];x.canvasPosition=
x.canvasPosition||{};A.textBaseline="bottom";x.clip&&(A.save(),A.beginPath(),A.rect(x.clip.left,x.clip.top,x.clip.width,x.clip.height),A.clip());if(x.ctx.storage){i=0;for(j=x.ctx.storage.length;i<j;i+=1)switch(l=x.ctx.storage[i],l.type){case "variable":A[l.name]=l.arguments;break;case "function":if(l.name==="fillRect")(!e||l.arguments[0]+l.arguments[2]<2880&&l.arguments[1]+l.arguments[3]<2880)&&A.fillRect.apply(A,l.arguments);else if(l.name==="fillText")(!e||l.arguments[1]<2880&&l.arguments[2]<2880)&&
A.fillText.apply(A,l.arguments);else if(l.name==="drawImage"&&l.arguments[8]>0&&l.arguments[7]){if(d&&c.taintTest&&s.indexOf(l.arguments[0].src)===-1){I.drawImage(l.arguments[0],0,0);try{I.getImageData(0,0,1,1)}catch(B){I=k.createElement("canvas");I=I.getContext("2d");continue}s.push(l.arguments[0].src)}A.drawImage.apply(A,l.arguments)}}}x.clip&&A.restore()}C("html2canvas: Renderer: Canvas renderer done - returning canvas obj");O=c.elements.length;return O===1&&typeof c.elements[0]==="object"&&c.elements[0].nodeName!==
"BODY"&&e===!1?(s=H.Util.Bounds(c.elements[0]),d=k.createElement("canvas"),d.width=s.width,d.height=s.height,A=d.getContext("2d"),A.drawImage(b,s.left,s.top,s.width,s.height,0,0,s.width,s.height),b=null,d):b}}};k.html2canvas=H})(window,document);