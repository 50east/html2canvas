/*
 html2canvas v0.33 <http://html2canvas.hertzen.com>
 Copyright (c) 2011 Niklas von Hertzen. All rights reserved.
 http://www.twitter.com/niklasvh

 Released under MIT License
*/
(function(f,N,s){function D(a){g.logging&&f.console&&f.console.log&&f.console.log(a)}function U(a,b){var t=[];return{storage:t,width:a,height:b,fillRect:function(){t.push({type:"function",name:"fillRect",arguments:arguments})},drawImage:function(){t.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){t.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){t.push({type:"variable",name:a,arguments:b})}}}var g={Util:{}};g.Util.backgroundImage=
function(a){if(/data:image\/.*;base64,/i.test(a)||/^(-webkit|-moz|linear-gradient|-o-)/.test(a))return a;a.toLowerCase().substr(0,5)==='url("'?(a=a.substr(5),a=a.substr(0,a.length-2)):(a=a.substr(4),a=a.substr(0,a.length-1));return a};g.Util.Bounds=function(a){var b={};if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),b.top=a.top,b.bottom=a.bottom||a.top+a.height,b.left=a.left,b.width=a.width||a.right-a.left,b.height=a.height||a.bottom-a.top,b};g.Util.getCSS=function(a,b){return $(a).css(b)};
g.Util.Extend=function(a,b){for(var t in a)a.hasOwnProperty(t)&&(b[t]=a[t]);return b};g.Util.Children=function(a){var b;try{b=$(a).contents()}catch(t){D("html2canvas.Util.Children failed with exception: "+t.message),b=[]}return b};g.Generate={};g.Generate.Gradient=function(a,b){function t(a){for(var c=-1,b="",k;c++<a.length;)if(k=a.charAt(c),k===")"){if(b+=k,s.push(b),b="",c=a.indexOf(",",c)+1,c===0)break}else b+=k}var g=N.createElement("canvas"),o=g.getContext("2d"),l,c=0,f=0,E=0,A=0,s=[],k;g.width=
b.width;g.height=b.height;if((l=a.match(/-webkit-linear-gradient\((.*)\)/))!==null){k=l[1].split(",",1)[0];t(l[1].substr(k.length+2));k=k.split(" ");for(l=0;l<k.length;l+=1)switch(k[l]){case "top":A=b.height;break;case "right":c=b.width;break;case "bottom":f=b.height;break;case "left":E=b.width}}else if((l=a.match(/-webkit-gradient\(linear, (\d+)[%]{0,1} (\d+)[%]{0,1}, (\d+)[%]{0,1} (\d+)[%]{0,1}, from\((.*)\), to\((.*)\)\)/))!==null)c=l[1]*b.width/100,f=l[2]*b.height/100,E=l[3]*b.width/100,A=l[4]*
b.height/100,s.push(l[5]),s.push(l[6]);else if((l=a.match(/-moz-linear-gradient\((\d+)[%]{0,1} (\d+)[%]{0,1}, (.*)\)/))!==null)c=l[1]*b.width/100,f=l[2]*b.width/100,E=b.width-c,A=b.height-f,t(l[3]);else return;E=o.createLinearGradient(c,f,E,A);A=1/(s.length-1);c=0;for(f=s.length;c<f;c+=1)try{E.addColorStop(A*c,s[c])}catch(j){D(["failed to add color stop: ",j,"; tried to add: ",s[c],"; stop: ",c,"; in: ",a])}o.fillStyle=E;o.fillRect(0,0,b.width,b.height);o=new Image;o.src=g.toDataURL();return o};g.Generate.ListAlpha=
function(a){var b="",g;do g=a%26,b=String.fromCharCode(g+64)+b,a/=26;while(a*26>26);return b};g.Generate.ListRoman=function(a){var b=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],g=[1E3,900,500,400,100,90,50,40,10,9,5,4,1],f="",o,l=b.length;if(a<=0||a>=4E3)return a;for(o=0;o<l;o+=1)for(;a>=g[o];)a-=g[o],f+=b[o];return f};g.Parse=function(a,b,t){function J(h,d){var a=parseInt(u(h,d),10);return isNaN(a)?0:a}function o(h,a,c,b,e,n){n!=="transparent"&&(h.setVariable("fillStyle",n),h.fillRect(a,
c,b,e),d+=1)}function l(h,a){switch(a){case "lowercase":return h.toLowerCase();case "capitalize":return h.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(h,a,d){if(h.length>0)return a+d.toUpperCase()});case "uppercase":return h.toUpperCase();default:return h}}function c(h){return h.replace(/^\s*/g,"").replace(/\s*$/g,"")}function H(h,a,b){var b=b.ctx,K=u(h,"fontFamily"),k=u(h,"fontSize"),R=u(h,"color"),j=u(h,"textDecoration"),w=u(h,"textAlign"),r=u(h,"letterSpacing"),G,B,p=u(h,"fontWeight"),x=u(h,"fontStyle"),
v=u(h,"fontVariant"),f=0;a.nodeValue=l(a.nodeValue,u(h,"textTransform"));if(c(a.nodeValue).length>0){if(j!=="none")if(e[K+"-"+k]!==s)B=e[K+"-"+k];else{B=i.createElement("div");var h=i.createElement("img"),q=i.createElement("span"),I;B.style.visibility="hidden";B.style.fontFamily=K;B.style.fontSize=k;B.style.margin=0;B.style.padding=0;F.appendChild(B);h.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";h.width=1;h.height=1;h.style.margin=0;h.style.padding=0;h.style.verticalAlign=
"baseline";q.style.fontFamily=K;q.style.fontSize=k;q.style.margin=0;q.style.padding=0;q.appendChild(i.createTextNode("Hidden Text"));B.appendChild(q);B.appendChild(h);I=h.offsetTop-q.offsetTop+1;B.removeChild(q);B.appendChild(i.createTextNode("Hidden Text"));B.style.lineHeight="normal";h.style.verticalAlign="super";h={baseline:I,lineWidth:1,middle:h.offsetTop-B.offsetTop+1};e[K+"-"+k]=h;F.removeChild(B);B=h}w=w.replace(["-webkit-auto"],["auto"]);w=t.letterRendering===!1&&/^(left|right|justify|auto)$/.test(w)&&
/^(normal|none)$/.test(r)?a.nodeValue.split(/(\b| )/):a.nodeValue.split("");switch(parseInt(p,10)){case 401:p="bold";break;case 400:p="normal"}b.setVariable("fillStyle",R);b.setVariable("font",x+" "+v+" "+p+" "+k+" "+K);b.setVariable("textAlign","left");K=a;for(k=0;k<w.length;k+=1){p=null;if(n.rangeBounds){if(j!=="none"||c(w[k]).length!==0)p=w[k],i.createRange?(G=i.createRange(),G.setStart(a,f),G.setEnd(a,f+p.length)):G=F.createTextRange(),G=G.getBoundingClientRect()?G.getBoundingClientRect():{}}else{if(typeof K.nodeValue!==
"string")continue;x=K.splitText(w[k].length);v=K.parentNode;r=i.createElement("wrapper");h=K.cloneNode(!0);r.appendChild(K.cloneNode(!0));v.replaceChild(r,K);G=g.Util.Bounds(r);p=K.nodeValue;K=x;v.replaceChild(h,r)}if(p!==null)x=G.left,v=G.bottom,r=b,c(p).length>0&&(r.fillText(p,x,v),d+=1);switch(j){case "underline":o(b,G.left,Math.round(G.top+B.baseline+B.lineWidth),G.width,1,R);break;case "overline":o(b,G.left,G.top,G.width,1,R);break;case "line-through":o(b,G.left,Math.ceil(G.top+B.middle+B.lineWidth),
G.width,1,R)}f+=w[k].length}}}function E(h){return(h=b[h])&&h.succeeded===!0?h.img:!1}function A(h,a){var b=Math.max(h.left,a.left),d=Math.max(h.top,a.top);return{left:b,top:d,width:Math.min(h.left+h.width,a.left+a.width)-b,height:Math.min(h.top+h.height,a.top+a.height)-d}}function O(h,a,b,d){for(var c=b.left,k=b.top,e=b.width,b=b.height,n,i,g,j,w,l=function(h){var a=[],b=["Top","Right","Bottom","Left"],d;for(d=0;d<4;d+=1)a.push({width:J(h,"border"+b[d]+"Width"),color:u(h,"border"+b[d]+"Color")});
return a}(h),h=0;h<4;h+=1)if(n=l[h],n.width>0){i=c;g=k;j=e;w=b-l[2].width;switch(h){case 0:w=l[0].width;break;case 1:i=c+e-l[1].width;j=l[1].width;break;case 2:g=g+b-l[2].width;w=l[2].width;break;case 3:j=l[3].width}j={left:i,top:g,width:j,height:w};d&&(j=A(j,d));j.width>0&&j.height>0&&o(a,i,g,j.width,j.height,n.color)}return l}function k(h,a,b){var d=i.createElement("valuewrap"),c=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth",
"borderTopWidth"],k,e,n;k=0;for(e=c.length;k<e;k+=1){n=c[k];try{d.style[n]=u(h,n)}catch(j){D("html2canvas: Parse: Exception caught in renderFormValue: "+j.message)}}d.style.borderColor="black";d.style.borderStyle="solid";d.style.display="block";d.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(h.type)||h.nodeName==="SELECT")d.style.lineHeight=u(h,"height");d.style.top=a.top+"px";d.style.left=a.left+"px";a=i.createTextNode(h.nodeName==="SELECT"?h.options[h.selectedIndex].text:
h.value);d.appendChild(a);F.appendChild(d);H(h,a,b);F.removeChild(d)}function j(h,a,d){var b=function(a){return a!==s?(a.split(",")[0]||"0 0").split(" "):[u(h,"backgroundPositionX"),u(h,"backgroundPositionY")]}(u(h,"backgroundPosition")),c,k;b.length===1&&(c=b,b=[],b[0]=c,b[1]=c);b[0].toString().indexOf("%")!==-1?(k=parseFloat(b[0])/100,c=a.width*k-d.width*k):c=parseInt(b[0],10);b[1].toString().indexOf("%")!==-1?(k=parseFloat(b[1])/100,a=a.height*k-d.height*k):a=parseInt(b[1],10);return{top:a,left:c}}
function Q(h,a,b,c,k,e,n,i){var j=0,g=0;n-b>0&&(j=n-b);i-c>0&&(g=i-c);h.drawImage(a,j,g,k-j,e-g,b+j,c+g,k-j,e-g);d+=1}function I(h,a,b,d,c,k,e){var e=Math.min(a.height,e),n,i;b.left-=Math.ceil(b.left/a.width)*a.width;for(i=d+b.left;i<k+d;)n=Math.floor(i+a.width)>k+d?k+d-i:a.width,Q(h,a,i,c+b.top,n,e,d,c),i=Math.floor(i+a.width)}function y(a,b){var e=g.Util.Bounds(a),n=e.left,l=e.top,f=e.width,m=e.height,F,r=u(a,"backgroundColor"),s=u(a,"position"),B,p=u(a,"opacity"),x,v;b?S={}:(S={width:Math.max(Math.max(i.body.scrollWidth,
i.documentElement.scrollWidth),Math.max(i.body.offsetWidth,i.documentElement.offsetWidth),Math.max(i.body.clientWidth,i.documentElement.clientWidth)),height:Math.max(Math.max(i.body.scrollHeight,i.documentElement.scrollHeight),Math.max(i.body.offsetHeight,i.documentElement.offsetHeight),Math.max(i.body.clientHeight,i.documentElement.clientHeight))},b={opacity:1});v=u(a,"zIndex");(B=b.zIndex)?v!=="auto"&&(v={zindex:v,children:[]},B.children.push(v),B=v):B=v={zindex:0,children:[]};x={ctx:U(S.width||
f,S.height||m),zIndex:B,opacity:p*b.opacity,cssPosition:s};if(b.clip)x.clip=g.Util.Extend({},b.clip);if(t.useOverflow===!0&&/(hidden|scroll|auto)/.test(u(a,"overflow"))===!0&&/(BODY)/i.test(a.nodeName)===!1)x.clip=x.clip?A(x.clip,e):e;s=B.children.push(x);v=B.children[s-1].ctx;v.setVariable("globalAlpha",x.opacity);p=O(a,v,e,!1);x.borders=p;w.test(a.nodeName)&&t.iframeDefault!=="transparent"&&(r=t.iframeDefault==="default"?"#efefef":t.iframeDefault);f={left:n+p[3].width,top:l+p[0].width,width:f-(p[1].width+
p[3].width),height:m-(p[0].width+p[2].width)};x.clip&&(f=A(f,x.clip));if(f.height>0&&f.width>0){o(v,f.left,f.top,f.width,f.height,r);var C=f,q=u(a,"backgroundImage"),y=u(a,"backgroundRepeat").split(",")[0],z,H,L;!/data:image\/.*;base64,/i.test(q)&&!/^(-webkit|-moz|linear-gradient|-o-)/.test(q)&&(q=q.split(",")[0]);if(typeof q!=="undefined"&&/^(1|none)$/.test(q)===!1)if(q=g.Util.backgroundImage(q),r=E(q),m=j(a,C,r),r)switch(y){case "repeat-x":I(v,r,m,C.left,C.top,C.width,C.height);break;case "repeat-y":q=
C.left;y=C.top;z=C.height;H=Math.min(r.width,C.width);m.top-=Math.ceil(m.top/r.height)*r.height;for(L=y+m.top;L<z+y;)C=Math.floor(L+r.height)>z+y?z+y-L:r.height,Q(v,r,q+m.left,L,H,C,q,y),L=Math.floor(L+r.height);break;case "no-repeat":q=C.width-m.left;L=C.height-m.top;y=m.left;z=m.top;H=m.left+C.left;m=m.top+C.top;y<0?(y=Math.abs(y),H+=y,q=Math.min(C.width,r.width-y)):(q=Math.min(q,r.width),y=0);z<0?(z=Math.abs(z),m+=z,L=Math.min(C.height,r.height-z)):(L=Math.min(L,r.height),z=0);L>0&&q>0&&(v.drawImage(r,
y,z,q,L,H,m,q,L),d+=1);break;default:m.top-=Math.ceil(m.top/r.height)*r.height;for(q=C.top+m.top;q<C.height+C.top;)y=Math.min(r.height,C.height+C.top-q),y=Math.floor(q+r.height)>y+q?y+q-q:r.height,q<C.top?(z=C.top-q,q=C.top):z=0,I(v,r,m,C.left,q,C.width,y),z>0&&(m.top+=z),q=Math.floor(q+r.height)-z}else D("html2canvas: Error loading background:"+q)}switch(a.nodeName){case "IMG":x=a.getAttribute("src");(F=E(x))?(x=J(a,"paddingLeft"),f=J(a,"paddingTop"),r=J(a,"paddingRight"),m=J(a,"paddingBottom"),
v.drawImage(F,0,0,F.width,F.height,n+x+p[3].width,l+f+p[0].width,e.width-(p[1].width+p[3].width+x+r),e.height-(p[0].width+p[2].width+f+m)),d+=1):D("html2canvas: Error loading <img>:"+x);break;case "INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&a.value.length>0&&k(a,e,x);break;case "TEXTAREA":a.value.length>0&&k(a,e,x);break;case "SELECT":a.options.length>0&&k(a,e,x);break;case "LI":e=f;n=u(a,"listStylePosition");p=u(a,"listStyleType");l=u(a,"fontWeight");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(p)){v=
$(a).index()+1;switch(p){case "decimal":F=v;break;case "decimal-leading-zero":F=v.toString().length===1?"0"+v.toString():v.toString();break;case "upper-roman":F=g.Generate.ListRoman(v);break;case "lower-roman":F=g.Generate.ListRoman(v).toLowerCase();break;case "lower-alpha":F=g.Generate.ListAlpha(v).toLowerCase();break;case "upper-alpha":F=g.Generate.ListAlpha(v)}F+=". ";x=F;p=i.createElement("boundelement");p.style.display="inline";v=a.style.listStyleType;a.style.listStyleType="none";p.appendChild(i.createTextNode(x));
a.insertBefore(p,a.firstChild);x=g.Util.Bounds(p);a.removeChild(p);a.style.listStyleType=v;switch(l){case 401:l="bold";break;case 400:l="normal"}P.setVariable("fillStyle",u(a,"color"));P.setVariable("font",u(a,"fontVariant")+" "+l+" "+u(a,"fontStyle")+" "+u(a,"fontSize")+" "+u(a,"fontFamily"));if(n==="inside")P.setVariable("textAlign","left"),e=e.left,n=x.bottom,l=P,c(F).length>0&&(l.fillText(F,e,n),d+=1)}break;case "CANVAS":x=J(a,"paddingLeft"),f=J(a,"paddingTop"),r=J(a,"paddingRight"),m=J(a,"paddingBottom"),
v.drawImage(a,0,0,a.width,a.height,n+x+p[3].width,l+f+p[0].width,e.width-(p[1].width+p[3].width+x+r),e.height-(p[0].width+p[2].width+f+m)),d+=1}return B.children[s-1]}function m(a,b){if(u(a,"display")!=="none"&&u(a,"visibility")!=="hidden"&&(b=y(a,b)||b,P=b.ctx,!w.test(a.nodeName))){var d=g.Util.Children(a),c,e,k;c=0;for(k=d.length;c<k;c+=1)e=d[c],e.nodeType===1?m(e,b):e.nodeType===3&&H(a,e,b)}}f.scroll(0,0);if(a===s)a=N.body;var n={rangeBounds:!1},d=0,e={},i=a.ownerDocument,w=RegExp("("+t.ignoreElements+
")"),F=i.body,z,M,P,S,T,b=b||{};if(i.createRange&&(z=i.createRange(),z.getBoundingClientRect)){M=i.createElement("boundtest");M.style.height="123px";M.style.display="block";F.appendChild(M);z.selectNode(M);z=z.getBoundingClientRect();z=z.height;if(z===123)n.rangeBounds=!0;F.removeChild(M)}var u=g.Util.getCSS;M=y(a,null);z=0;a=a.children;for(T=a.length;z<T;z+=1)m(a[z],M);M.backgroundColor=u(F,"backgroundColor");return M};g.Preload=function(a,b){function t(){D("html2canvas: start: images: "+c.numLoaded+
" / "+c.numTotal+" (failed: "+c.numFailed+")");!c.firstRun&&c.numLoaded>=c.numTotal&&(typeof b.complete==="function"&&b.complete(c),D("Finished loading images: # "+c.numTotal+" (failed: "+c.numFailed+")"))}function J(a,d,e){var i,j=b.proxy,g;I.href=a;a=I.href;i="html2canvas_"+O++;e.callbackname=i;j+=j.indexOf("?")>-1?"&":"?";j+="url="+encodeURIComponent(a)+"&callback="+i;g=k.createElement("script");f[i]=function(a){a.substring(0,6)==="error:"?(e.succeeded=!1,c.numLoaded++,c.numFailed++,t()):(l(d,
e),d.src=a);f[i]=s;try{delete f[i]}catch(b){}g.parentNode.removeChild(g);g=null;delete e.script;delete e.callbackname};g.setAttribute("type","text/javascript");g.setAttribute("src",j);e.script=g;f.document.body.appendChild(g)}function o(a){var b=g.Util.Children(a),e,k=b.length,j,l=!1;for(e=0;e<k;e+=1)o(b[e]);try{l=a.nodeType}catch(f){l=!1,D("html2canvas: failed to access some element's nodeType - Exception: "+f.message)}if(l===1||l===s){try{j=g.Util.getCSS(a,"backgroundImage")}catch(m){D("html2canvas: failed to get background-image - Exception: "+
m.message)}j&&j!=="1"&&j!=="none"&&(j.substring(0,7)==="-webkit"||j.substring(0,3)==="-o-"||j.substring(0,4)==="-moz"?(a=g.Generate.Gradient(j,g.Util.Bounds(a)),a!==s&&(c[j]={img:a,succeeded:!0},c.numTotal++,c.numLoaded++,t())):(j=g.Util.backgroundImage(j.match(/data:image\/.*;base64,/i)?j:j.split(",")[0]),E.loadImage(j)))}}function l(a,d){a.onload=function(){d.timer!==s&&f.clearTimeout(d.timer);c.numLoaded++;d.succeeded=!0;t()};a.onerror=function(){if(a.crossOrigin==="anonymous"&&(f.clearTimeout(d.timer),
b.proxy)){var e=a.src;a=new Image;d.img=a;a.src=e;J(a.src,a,d);return}c.numLoaded++;c.numFailed++;d.succeeded=!1;t()}}var c={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},H,E,A,O=0,k=a.ownerDocument,j=k.images,Q=j.length,I=k.createElement("a"),y=function(a){return a.crossOrigin!==s}(new Image),m;I.href=f.location.href;H=I.protocol+I.host;a=a||k.body;E={loadImage:function(a){var d,e;if(a&&c[a]===s)d=new Image,a.match(/data:image\/.*;base64,/i)?(d.src=a.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),
e=c[a]={img:d},c.numTotal++,l(d,e)):(I.href=a,I.href=I.href,I.protocol+I.host===H||b.allowTaint===!0?(e=c[a]={img:d},c.numTotal++,l(d,e),d.src=a):y&&!b.allowTaint&&b.useCORS?(d.crossOrigin="anonymous",e=c[a]={img:d},c.numTotal++,l(d,e),d.src=a,d.customComplete=function(){if(this.img.complete)this.img.onerror();else this.timer=f.setTimeout(this.img.customComplete,100)}.bind(e),d.customComplete()):b.proxy&&(e=c[a]={img:d},c.numTotal++,J(a,d,e)))},cleanupDOM:function(a){var d,e;if(!c.cleanupDone){a&&
typeof a==="string"?D("html2canvas: Cleanup because: "+a):D("html2canvas: Cleanup after timeout: "+b.timeout+" ms.");for(e in c)if(c.hasOwnProperty(e)&&(d=c[e],typeof d==="object"&&d.callbackname&&d.succeeded===s)){f[d.callbackname]=s;try{delete f[d.callbackname]}catch(k){}d.script&&d.script.parentNode&&(d.script.setAttribute("src","about:blank"),d.script.parentNode.removeChild(d.script));c.numLoaded++;c.numFailed++;D("html2canvas: Cleaned up failed img: '"+e+"' Steps: "+c.numLoaded+" / "+c.numTotal)}f.stop!==
s?f.stop():N.execCommand!==s&&N.execCommand("Stop",!1);N.close!==s&&N.close();c.cleanupDone=!0;a&&typeof a==="string"||t()}},renderingDone:function(){m&&f.clearTimeout(m)}};b.timeout>0&&(m=f.setTimeout(E.cleanupDOM,b.timeout));D("html2canvas: Preload starts: finding background-images");c.firstRun=!0;o(a);D("html2canvas: Preload: Finding images");for(A=0;A<Q;A+=1)E.loadImage(j[A].getAttribute("src"));c.firstRun=!1;D("html2canvas: Preload: Done.");c.numTotal===c.numLoaded&&t();return E};g.Renderer=
function(a,b){function t(a){var b=[],c=[],a=a.children,g,f,m,n;g=0;for(m=a.length;g<m;g+=1)f=a[g],f.children&&f.children.length>0?(b.push(f),c.push(f.zindex)):l.push(f);c.sort(function(a,b){return a-b});a=0;for(g=c.length;a<g;a+=1){f=c[a];m=0;for(n=b.length;m<=n;m+=1)if(b[m].zindex===f){f=b.splice(m,1);t(f[0]);break}}}function J(a){t(a.zIndex);var j=c.getContext("2d"),f,o,y,m,n,d=N.createElement("canvas");m=d.getContext!==s;var e,i,d=m?d.getContext("2d"):{};n=[];c.width=c.style.width=!H?b.width||
a.ctx.width:Math.min(E,b.width||a.ctx.width);c.height=c.style.height=!H?b.height||a.ctx.height:Math.min(E,b.height||a.ctx.height);f=j.fillStyle;j.fillStyle=a.backgroundColor;j.fillRect(0,0,c.width,c.height);j.fillStyle=f;f=0;for(o=l.length;f<o;f+=1){a=l.splice(0,1)[0];a.canvasPosition=a.canvasPosition||{};j.textBaseline="bottom";a.clip&&(j.save(),j.beginPath(),j.rect(a.clip.left,a.clip.top,a.clip.width,a.clip.height),j.clip());if(a.ctx.storage){y=0;for(e=a.ctx.storage.length;y<e;y+=1)switch(i=a.ctx.storage[y],
i.type){case "variable":j[i.name]=i.arguments;break;case "function":if(i.name==="fillRect")(!H||i.arguments[0]+i.arguments[2]<E&&i.arguments[1]+i.arguments[3]<E)&&j.fillRect.apply(j,i.arguments);else if(i.name==="fillText")(!H||i.arguments[1]<E&&i.arguments[2]<E)&&j.fillText.apply(j,i.arguments);else if(i.name==="drawImage"&&i.arguments[8]>0&&i.arguments[7]){if(m&&b.taintTest&&n.indexOf(i.arguments[0].src)===-1){d.drawImage(i.arguments[0],0,0);try{d.getImageData(0,0,1,1)}catch(w){d=N.createElement("canvas");
d=d.getContext("2d");continue}n.push(i.arguments[0].src)}j.drawImage.apply(j,i.arguments)}}}a.clip&&j.restore()}D("html2canvas: Renderer: Canvas renderer done - returning canvas obj");o=b.elements.length;return o===1&&typeof b.elements[0]==="object"&&b.elements[0].nodeName!=="BODY"&&H===!1?(n=g.Util.Bounds(b.elements[0]),m=A.createElement("canvas"),m.width=n.width,m.height=n.height,j=m.getContext("2d"),j.drawImage(c,n.left,n.top,n.width,n.height,0,0,n.width,n.height),c=null,m):c}function o(a){t(a.zIndex);
var c=A.createElementNS("http://www.w3.org/2000/svg","svg"),g=A.createElementNS("http://www.w3.org/2000/svg","defs"),f,o,m,n,d,e,i={},w,s=0;c.setAttribute("version","1.1");c.setAttribute("baseProfile","full");c.setAttribute("viewBox","0 0 "+Math.max(a.ctx.width,b.width)+" "+Math.max(a.ctx.height,b.height));c.setAttribute("width",Math.max(a.ctx.width,b.width)+"px");c.setAttribute("height",Math.max(a.ctx.height,b.height)+"px");c.setAttribute("preserveAspectRatio","none");c.appendChild(g);a=0;for(o=
l.length;a<o;a+=1)if(n=l.splice(0,1)[0],n.canvasPosition=n.canvasPosition||{},n.ctx.storage){f=0;for(m=n.ctx.storage.length;f<m;f+=1)switch(d=n.ctx.storage[f],d.type){case "variable":i[d.name]=d.arguments;break;case "function":d.name==="fillRect"?(e=A.createElementNS("http://www.w3.org/2000/svg","rect"),e.setAttribute("x",d.arguments[0]),e.setAttribute("y",d.arguments[1]),e.setAttribute("width",d.arguments[2]),e.setAttribute("height",d.arguments[3]),e.setAttribute("fill",i.fillStyle),c.appendChild(e)):
d.name==="fillText"?(e=A.createElementNS("http://www.w3.org/2000/svg","text"),w=i.font.split(" "),e.style.fontVariant=w.splice(0,1)[0],e.style.fontWeight=w.splice(0,1)[0],e.style.fontStyle=w.splice(0,1)[0],e.style.fontSize=w.splice(0,1)[0],e.setAttribute("x",d.arguments[1]),e.setAttribute("y",d.arguments[2]-(parseInt(e.style.fontSize,10)+3)),e.setAttribute("fill",i.fillStyle),e.style.dominantBaseline="text-before-edge",e.style.fontFamily=w.join(" "),w=A.createTextNode(d.arguments[0]),e.appendChild(w),
c.appendChild(e)):d.name==="drawImage"&&d.arguments[8]>0&&d.arguments[7]&&(e=A.createElementNS("http://www.w3.org/2000/svg","clipPath"),e.setAttribute("id","clipId"+s),w=A.createElementNS("http://www.w3.org/2000/svg","rect"),w.setAttribute("x",d.arguments[5]),w.setAttribute("y",d.arguments[6]),w.setAttribute("width",d.arguments[3]),w.setAttribute("height",d.arguments[4]),e.appendChild(w),g.appendChild(e),e=A.createElementNS("http://www.w3.org/2000/svg","image"),e.setAttributeNS("http://www.w3.org/1999/xlink",
"xlink:href",d.arguments[0].src),e.setAttribute("width",d.arguments[0].width),e.setAttribute("height",d.arguments[0].height),e.setAttribute("x",d.arguments[5]-d.arguments[1]),e.setAttribute("y",d.arguments[6]-d.arguments[2]),e.setAttribute("clip-path","url(#clipId"+s+")"),e.setAttribute("preserveAspectRatio","none"),c.appendChild(e),s+=1)}}D("html2canvas: Renderer: SVG Renderer done - returning SVG DOM obj");return c}var l=[],c,H=!1,E=2880,A=N;switch(b.renderer.toLowerCase()){case "canvas":if(c=A.createElement("canvas"),
c.getContext)return D("html2canvas: Renderer: using canvas renderer"),J(a);else{H=!0;D("html2canvas: Renderer: canvas not available, using flashcanvas");var O=A.createElement("script");O.src=b.flashcanvas;O.onload=function(a,b){var c;if(a.onload===s)a.onreadystatechange!==s?(c=function(){a.readyState!=="loaded"&&a.readyState!=="complete"?f.setTimeout(c,250):b()},f.setTimeout(c,250)):D("html2canvas: Renderer: Can't track when flashcanvas is loaded");else return b}(O,function(){typeof f.FlashCanvas!==
"undefined"&&(D("html2canvas: Renderer: Flashcanvas initialized"),f.FlashCanvas.initElement(c),J(a))});A.body.appendChild(O);return c}case "svg":if(A.createElementNS)return D("html2canvas: Renderer: using SVG renderer"),o(a)}return this};f.html2canvas=function(a,b){var t,s,o={logging:!1,elements:a,proxy:"http://html2canvas.appspot.com/",timeout:0,useCORS:!1,allowTaint:!1,iframeDefault:"default",ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,width:null,height:null,renderer:"canvas",
taintTest:!0},o=g.Util.Extend(b,o);g.logging=o.logging;o.complete=function(b){if(!(typeof o.onpreloaded==="function"&&o.onpreloaded(b)===!1)&&(t=g.Parse(a,b,o),!(typeof o.onparsed==="function"&&o.onparsed(t)===!1)&&(s=g.Renderer(t,o),typeof o.onrendered==="function")))o.onrendered(s)};f.setTimeout(function(){g.Preload(a,o)},0);return{render:function(a,b){return g.Renderer(a,g.Util.Extend(b,o))},parse:function(a,b,f){return g.Parse(a,b,g.Util.Extend(f,o))},preload:function(a,b){return g.Preload(a,
g.Util.Extend(b,o))},log:D}}})(window,document);