<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Screenshot console - html2canvas - Screenshots with JavaScript</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Screenshot creation with JavaScript">
        <meta name="author" content="Niklas von Hertzen">

        <!-- Le styles -->
        <link href="style.css" rel="stylesheet">
        <style type="text/css">
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
        </style>


        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <!-- Le fav and touch icons 
        <link rel="shortcut icon" href="images/favicon.ico">
        <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
        -->
    </head>

    <body>
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="index.html">html2canvas</a>
                    <div class="nav-collapse">
                        <ul class="nav">
                            <li class="@LINK1@"><a href="index.html">Home</a></li>
                            <li class="@LINK2@"><a href="about.html">About</a></li>
                            <li class="@LINK3@"><a href="documentation.html">Documentation</a></li>
                            <li class="@LINK4@"><a href="examples.html">Examples</a></li>
                            <li><a href="https://github.com/niklasvh/html2canvas/downloads">Download</a></li>
                        </ul>
                        <p class="navbar-text pull-right" style="padding-top:5px;margin-bottom:-5px;">



                            <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://html2canvas.hertzen.com/" data-text="html2canvas - screenshots with #JavaScript" data-count="horizontal" data-via="niklasvh">Tweet</a>
                            <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
                            <!-- Place this tag where you want the +1 button to render -->
                        <g:plusone size="medium" annotation="inline" href="http://html2canvas.hertzen.com" width="250"></g:plusone>

                        </p>

                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>
        <a href="http://github.com/niklasvh/html2canvas"><img style="position: fixed; top: 0; right: 0; border: 0;z-index:9999;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>

        <div class="container">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/jquery-1.7.1.min.js"><\/script>')</script>
<script type="text/javascript" src="js/html2canvas.js"></script>


<script type="text/javascript"> 
            
    var date = new Date();
    var message,
    timeoutTimer,
    timer;
            
    var proxyUrl = "http://html2canvas.appspot.com";
            
    function addRow(table,field,val){
        var tr = $('<tr />').appendTo( $(table));
               
        tr.append($('<td />').css('font-weight','bold').text(field)).append($('<td />').text(val));
                
                
                
    }
            
    function throwMessage(msg,duration){
            
        window.clearTimeout(timeoutTimer);
        timeoutTimer = window.setTimeout(function(){
            message.fadeOut(function(){
                message.remove();   
            });                   
        },duration || 2000);
        $(message).remove();
        message = $('<div />').html(msg).css({
            margin:0,
            padding:10,
            background: "#000",
            opacity:0.7,
            position:"fixed",
            top:10,
            right:10,
            fontFamily: 'Tahoma' ,
            color:'#fff',
            fontSize:12,
            borderRadius:12,
            width:'auto',
            height:'auto',
            textAlign:'center',
            textDecoration:'none'
        }).hide().fadeIn().appendTo('body');
    }
            
    $(function(){
                
        $('#recommended a').click(function(e){
            e.preventDefault();
            $('#url').val(this.href);
            $('button').click();                  
        })
                
        var iframe,d;
                
                

                
        $('input[type="button"]').click(function(){
            $(iframe.contentWindow).unbind('load');
            $(iframe).contents().find('body').html2canvas({
                canvasHeight: d.body.scrollHeight,
                canvasWidth: d.body.scrollWidth,
                logging:true
                                            
            });             
                    
        });
                
        $('#getscreenshot').click(function(e){
            e.preventDefault();
            $(this).prop('disabled',true);
            var url = $('#url').val();
            $('#content').append($('<img />').attr('src','loading.gif').css('margin-top',40));
                    
            var urlParts = document.createElement('a');
            urlParts.href = url;
                    
            $.ajax({
                data: {
                    xhr2:false,
                    url:urlParts.href
                            
                },
                url: proxyUrl,
                dataType: "jsonp",
                success: function(html){
                            
                            
                    iframe = document.createElement('iframe');
                    $(iframe).css({
                        'visibility':'hidden'
                    }).width($(window).width()).height($(window).height());
                    $('#content').append(iframe);
                    d = iframe.contentWindow.document; 
                           
                    d.open();
                            
                    $(iframe.contentWindow).load(function(){

                        // timer = date.getTime();
                                
                        var body = $(iframe).contents().find('body'),
                        options = {
                            onrendered: function( canvas ) {
                                $("#content").empty().append(canvas);
                            },
                            allowTaint: true,
                            taintTest: false,
                            flashcanvas: "src/flashcanvas.min.js"
                        },
                        html2obj = html2canvas(body, options);

                    

                    });

                    $('base').attr('href',urlParts.protocol+"//"+urlParts.hostname+"/");
                    html = html.replace("<head>","<head><base href='"+urlParts.protocol+"//"+urlParts.hostname+"/' />");
                    if ($("#disablejs").prop('checked')){
                        html = html.replace(/\<script/gi,"<!--<script");
                        html = html.replace(/\<\/script\>/gi,"<\/script>-->");
                    }
                    // console.log(html);
                    d.write(html);

                    d.close();
                         
                }
        
        
            });
                    

        });
                   
               
                    
          
            
    });        
</script> 

<!--    <div style="background:red;padding:10px;color:#fff">
        App engine proxy is <a href="http://twitter.com/#!/Niklasvh/status/96265826713350144">temporarily out of use</a> due to exceeded bandwidth use. Please try again tomorrow or meanwhile check other examples <a href="http://html2canvas.hertzen.com/">here</a>.
    </div>-->


<h1>JavaScript screenshot creator</h1>
<form class="well form-search">
    <label for="url">Website URL:</label>
    <input type="url" id="url" value="http://www.yahoo.com" class="input-medium search-query" /><button class="btn" id="getscreenshot">Get screenshot!</button>
</form>



<label for="disablejs">Disable JavaScript (recommended, doesn't work well with the proxy)</label> <input type="checkbox" id="disablejs" checked /><br />
<small>Tested with Google Chrome 12, Firefox 4 and Opera 11.5</small>



<h3>Recommended (tested) pages:</h3>

<ul id="recommended">

    <li><a href="http://www.yahoo.com">yahoo.com</a></li>
    <li><a href="http://www.google.com">google.com</a></li>
    <li><a href="https://github.com/niklasvh/html2canvas">github.com</a></li>
    <li><a href="http://www.smashingmagazine.com">smashingmagazine.com</a></li>
    <li><a href="http://www.mashable.com">mashable.com</a></li>           
    <li><a href="http://www.facebook.com/google">facebook.com/google</a></li>
    <li><a href="http://www.youtube.com/">youtube.com</a></li>
    <li><a href="http://www.cnn.com/">cnn.com</a></li>

    <li><a href="http://www.engadget.com/">engadget.com (lot of elements, very slow)</a></li>
    <li><a href="http://eu.battle.net/en/">battle.net</a></li>


</ul>

<h4> About</h4>
<p>
    The whole screenshot is created with JavaScript. The only server interaction that is happening on this page is the proxy for loading the external pages/images into JSONP/CORS enabled page and onwards onto the JavaScript renderer script.
    There are a lot of problems of loading external pages, even with a proxy, and as such many pages will not render at all. If you wish to try the script properly, I recommend you get a copy of the source from <a href="https://github.com/niklasvh/html2canvas">here</a> instead.
</p>
<div id="content"></div>

            <hr>

            <footer>
                <p>
                   
                    Created by <a href="http://hertzen.com">Niklas von Hertzen</a> 
                   
                    <a href="https://twitter.com/Niklasvh" class="twitter-follow-button" data-show-count="false">Follow @Niklasvh</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                </p>
            </footer>

        </div> <!-- /container -->

        <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster 
        <script src="../assets/js/jquery.js"></script>
        <script src="../assets/js/bootstrap-transition.js"></script>
        <script src="../assets/js/bootstrap-alert.js"></script>
        <script src="../assets/js/bootstrap-modal.js"></script>
        <script src="../assets/js/bootstrap-dropdown.js"></script>
        <script src="../assets/js/bootstrap-scrollspy.js"></script>
        <script src="../assets/js/bootstrap-tab.js"></script>
        <script src="../assets/js/bootstrap-tooltip.js"></script>
        <script src="../assets/js/bootstrap-popover.js"></script>
        <script src="../assets/js/bootstrap-button.js"></script>
        <script src="../assets/js/bootstrap-collapse.js"></script>
        <script src="../assets/js/bootstrap-carousel.js"></script>
        <script src="../assets/js/bootstrap-typeahead.js"></script>
        -->
        <script src="script.min.js"></script>
        <script>
           var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-188600-10']);_gaq.push(['_trackPageview']);(function() {var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();   

          (function() {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
          })();
        </script>
    </body>
</html>